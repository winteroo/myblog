(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{394:function(s,t,n){s.exports=n.p+"assets/img/addcomment1.03567400.png"},395:function(s,t,n){s.exports=n.p+"assets/img/addcomment2.9020b01f.png"},450:function(s,t,n){"use strict";n.r(t);var a=n(18),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"为vuepress搭建的网站添加无后台的评论功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为vuepress搭建的网站添加无后台的评论功能"}},[s._v("#")]),s._v(" 为vuepress搭建的网站添加无后台的评论功能")]),s._v(" "),a("p",[s._v("前些日子，利用业余时间搭建了自己的静态网站"),a("a",{attrs:{href:"https://winteroo.github.io/myblog/",target:"_blank",rel:"noopener noreferrer"}},[s._v("进击的小超人"),a("OutboundLink")],1),s._v("（即为此网站），\n但是一直苦于网站是静态站点，无法看到别的小伙伴对我的网站的评价，但是今天，我发现了一款可以无后台的评论插件，于是，\n如获珍宝般的赶紧添加进自己的网站，现在给大家介绍一个集成的方法。")]),s._v(" "),a("h2",{attrs:{id:"基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[s._v("#")]),s._v(" 基础知识")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("首先利用vuepress如何搭建网页这里就不多说了，如果没有接触过这方面的知识，建议移步"),a("a",{attrs:{href:"https://www.vuepress.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("vuepress官网"),a("OutboundLink")],1),s._v("学习搭建网页的知识。")])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://valine.js.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Valine - 一款快速、简洁且高效的无后端评论系统"),a("OutboundLink")],1),s._v("，这里是我用到的主要评论功能的文档。")])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.leancloud.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("leanCloud"),a("OutboundLink")],1),s._v("，为valine提供云服务的云产品，我们需要按要求注册账号才可使用valine。（其中有需要支付宝实名认真的功能，开始还不是很放心，不过后来还是认证了）")])]),s._v(" "),a("li",[a("p",[s._v("想要在vuepress中集成该评论组件，我们还需要将其封装成vuepress可使用的插件才行，这里已经有大佬帮我们实现好了，地址"),a("a",{attrs:{href:"https://www.npmjs.com/package/vuepress-plugin-comment",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vuepress-comment-plugin"),a("OutboundLink")],1)])])]),s._v(" "),a("h2",{attrs:{id:"集成过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成过程"}},[s._v("#")]),s._v(" 集成过程")]),s._v(" "),a("ul",[a("li",[s._v("1、首先我们需要按照Valine的要求在LeanCloud上注册账户并创建项目。创建成功后会如下图所示:")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(394),alt:"leanCloud1"}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("2、在vuepress项目中安装插件"),a("a",{attrs:{href:"https://www.npmjs.com/package/vuepress-plugin-comment",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vuepress-comment-plugin"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("3、在vuepress的config文件中配置插件，下面贴上我自己的配置，可以直接使用")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vuepress-plugin-comment'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        choosen"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'valine'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          el"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#valine-vuepress-comment'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// lencloud上注册的appid和appkey")]),s._v("\n          appId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your app id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          appKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'your app key'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 评论组件的placeholder")]),s._v("\n          placeholder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'发表你的感想...(添加网址可直接点击头像文字进入该地址哦)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分辨当前页面请求的评论内容")]),s._v("\n          path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<%- frontmatter.to.path %>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 评论用户头像")]),s._v("\n          avatar"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robohash'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[a("img",{attrs:{src:n(395),alt:"addcomment2"}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("封装的vuepress插件使用了vue-router，我们这里采用的是"),a("code",[s._v("path: '<%- frontmatter.to.path %>'")]),s._v("，类似于\n"),a("code",[s._v("router.to.path")]),s._v("，所以可以理解为，我们要访问的界面的地址，而不是"),a("code",[s._v("window.location.href")]),s._v("，\n我调试中发现，插件在路由跳转之前就去加载下一页的评论列表，所以会导致，用户点击下一页时，加载的依然是当前页的数据，\n引发数据错乱。所以配置成即将跳转的路由路径便能实现查询下一的数据信息。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);